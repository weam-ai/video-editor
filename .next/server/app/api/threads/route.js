"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/threads/route";
exports.ids = ["app/api/threads/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fthreads%2Froute&page=%2Fapi%2Fthreads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fthreads%2Froute.ts&appDir=%2FUsers%2Fkshitijvarma%2FDesktop%2Fvideo-editor%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkshitijvarma%2FDesktop%2Fvideo-editor&isDev=true&tsconfigPath=tsconfig.json&basePath=%2Faivideo&assetPrefix=%2Faivideo&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fthreads%2Froute&page=%2Fapi%2Fthreads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fthreads%2Froute.ts&appDir=%2FUsers%2Fkshitijvarma%2FDesktop%2Fvideo-editor%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkshitijvarma%2FDesktop%2Fvideo-editor&isDev=true&tsconfigPath=tsconfig.json&basePath=%2Faivideo&assetPrefix=%2Faivideo&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_kshitijvarma_Desktop_video_editor_app_api_threads_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/threads/route.ts */ \"(rsc)/./app/api/threads/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/threads/route\",\n        pathname: \"/api/threads\",\n        filename: \"route\",\n        bundlePath: \"app/api/threads/route\"\n    },\n    resolvedPagePath: \"/Users/kshitijvarma/Desktop/video-editor/app/api/threads/route.ts\",\n    nextConfigOutput,\n    userland: _Users_kshitijvarma_Desktop_video_editor_app_api_threads_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/threads/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0aHJlYWRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ0aHJlYWRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdGhyZWFkcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmtzaGl0aWp2YXJtYSUyRkRlc2t0b3AlMkZ2aWRlby1lZGl0b3IlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGa3NoaXRpanZhcm1hJTJGRGVza3RvcCUyRnZpZGVvLWVkaXRvciZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSUyRmFpdmlkZW8mYXNzZXRQcmVmaXg9JTJGYWl2aWRlbyZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNpQjtBQUM5RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXZpZGVvZ2VuLW5leHQvPzYwZGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2tzaGl0aWp2YXJtYS9EZXNrdG9wL3ZpZGVvLWVkaXRvci9hcHAvYXBpL3RocmVhZHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RocmVhZHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90aHJlYWRzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS90aHJlYWRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2tzaGl0aWp2YXJtYS9EZXNrdG9wL3ZpZGVvLWVkaXRvci9hcHAvYXBpL3RocmVhZHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3RocmVhZHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fthreads%2Froute&page=%2Fapi%2Fthreads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fthreads%2Froute.ts&appDir=%2FUsers%2Fkshitijvarma%2FDesktop%2Fvideo-editor%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkshitijvarma%2FDesktop%2Fvideo-editor&isDev=true&tsconfigPath=tsconfig.json&basePath=%2Faivideo&assetPrefix=%2Faivideo&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/threads/route.ts":
/*!**********************************!*\
  !*** ./app/api/threads/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _models_Chat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../models/Chat */ \"(rsc)/./models/Chat.ts\");\n/* harmony import */ var _config_withSession__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../config/withSession */ \"(rsc)/./config/withSession.tsx\");\n\n\n\nasync function GET() {\n    await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.connectToDatabase)();\n    const session = await (0,_config_withSession__WEBPACK_IMPORTED_MODULE_2__.getSession)();\n    const companyId = session?.user?.companyId;\n    // Only return threads for this company\n    if (!companyId) return new Response(JSON.stringify({\n        threads: []\n    }), {\n        status: 200\n    });\n    const threads = await _models_Chat__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find({\n        companyId\n    }, {\n        threadId: 1,\n        title: 1,\n        updatedAt: 1\n    }).sort({\n        updatedAt: -1\n    }).limit(50);\n    return new Response(JSON.stringify({\n        threads\n    }), {\n        status: 200\n    });\n}\nasync function POST(request) {\n    await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.connectToDatabase)();\n    const session = await (0,_config_withSession__WEBPACK_IMPORTED_MODULE_2__.getSession)();\n    const user = session?.user;\n    const companyId = user?.companyId;\n    const email = user?.email;\n    const userId = user?._id;\n    const body = await request.json().catch(()=>({}));\n    const title = (body?.title || \"New chat\").toString().slice(0, 80);\n    const threadId = crypto.randomUUID();\n    if (!userId || !email || !companyId) {\n        return new Response(JSON.stringify({\n            error: \"User not authenticated\"\n        }), {\n            status: 401\n        });\n    }\n    // The new chat doc\n    const chat = await _models_Chat__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create({\n        id: threadId,\n        title,\n        user: {\n            id: userId,\n            email\n        },\n        companyId,\n        threadId,\n        messages: []\n    });\n    return new Response(JSON.stringify({\n        threadId,\n        chat: {\n            threadId,\n            title: chat.title,\n            updatedAt: chat.updatedAt\n        }\n    }), {\n        status: 201\n    });\n}\nasync function DELETE() {\n    await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.connectToDatabase)();\n    const session = await (0,_config_withSession__WEBPACK_IMPORTED_MODULE_2__.getSession)();\n    const companyId = session?.user?.companyId;\n    if (!companyId) return new Response(JSON.stringify({\n        ok: true,\n        deletedAll: true\n    }), {\n        status: 200\n    });\n    // Only delete this company's threads\n    await _models_Chat__WEBPACK_IMPORTED_MODULE_1__[\"default\"].deleteMany({\n        companyId\n    });\n    return new Response(JSON.stringify({\n        ok: true,\n        deletedAll: true\n    }), {\n        status: 200\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3RocmVhZHMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW1EO0FBQ1o7QUFDa0I7QUFFbEQsZUFBZUc7SUFDcEIsTUFBTUgsMERBQWlCQTtJQUN2QixNQUFNSSxVQUFVLE1BQU1GLCtEQUFVQTtJQUNoQyxNQUFNRyxZQUFZRCxTQUFTRSxNQUFNRDtJQUNqQyx1Q0FBdUM7SUFDdkMsSUFBSSxDQUFDQSxXQUFXLE9BQU8sSUFBSUUsU0FBU0MsS0FBS0MsU0FBUyxDQUFDO1FBQUVDLFNBQVMsRUFBRTtJQUFDLElBQUk7UUFBRUMsUUFBUTtJQUFJO0lBQ25GLE1BQU1ELFVBQVUsTUFBTVQsb0RBQUlBLENBQUNXLElBQUksQ0FBQztRQUFFUDtJQUFVLEdBQUc7UUFBRVEsVUFBVTtRQUFHQyxPQUFPO1FBQUdDLFdBQVc7SUFBRSxHQUFHQyxJQUFJLENBQUM7UUFBRUQsV0FBVyxDQUFDO0lBQUUsR0FBR0UsS0FBSyxDQUFDO0lBQ3RILE9BQU8sSUFBSVYsU0FBU0MsS0FBS0MsU0FBUyxDQUFDO1FBQUVDO0lBQVEsSUFBSTtRQUFFQyxRQUFRO0lBQUk7QUFDakU7QUFFTyxlQUFlTyxLQUFLQyxPQUFnQjtJQUN6QyxNQUFNbkIsMERBQWlCQTtJQUN2QixNQUFNSSxVQUFVLE1BQU1GLCtEQUFVQTtJQUNoQyxNQUFNSSxPQUFPRixTQUFTRTtJQUN0QixNQUFNRCxZQUFZQyxNQUFNRDtJQUN4QixNQUFNZSxRQUFRZCxNQUFNYztJQUNwQixNQUFNQyxTQUFTZixNQUFNZ0I7SUFDckIsTUFBTUMsT0FBTyxNQUFNSixRQUFRSyxJQUFJLEdBQUdDLEtBQUssQ0FBQyxJQUFPLEVBQUM7SUFDaEQsTUFBTVgsUUFBUSxDQUFDUyxNQUFNVCxTQUFTLFVBQVMsRUFBR1ksUUFBUSxHQUFHQyxLQUFLLENBQUMsR0FBRztJQUM5RCxNQUFNZCxXQUFXZSxPQUFPQyxVQUFVO0lBQ2xDLElBQUksQ0FBQ1IsVUFBVSxDQUFDRCxTQUFTLENBQUNmLFdBQVc7UUFDbkMsT0FBTyxJQUFJRSxTQUFTQyxLQUFLQyxTQUFTLENBQUM7WUFBRXFCLE9BQU87UUFBeUIsSUFBSTtZQUFFbkIsUUFBUTtRQUFJO0lBQ3pGO0lBQ0EsbUJBQW1CO0lBQ25CLE1BQU1vQixPQUFPLE1BQU05QixvREFBSUEsQ0FBQytCLE1BQU0sQ0FBQztRQUM3QkMsSUFBSXBCO1FBQ0pDO1FBQ0FSLE1BQU07WUFBRTJCLElBQUlaO1lBQVFEO1FBQU07UUFDMUJmO1FBQ0FRO1FBQ0FxQixVQUFVLEVBQUU7SUFDZDtJQUNBLE9BQU8sSUFBSTNCLFNBQVNDLEtBQUtDLFNBQVMsQ0FBQztRQUFFSTtRQUFVa0IsTUFBTTtZQUFFbEI7WUFBVUMsT0FBT2lCLEtBQUtqQixLQUFLO1lBQUVDLFdBQVdnQixLQUFLaEIsU0FBUztRQUFDO0lBQUUsSUFBSTtRQUFFSixRQUFRO0lBQUk7QUFDcEk7QUFFTyxlQUFld0I7SUFDcEIsTUFBTW5DLDBEQUFpQkE7SUFDdkIsTUFBTUksVUFBVSxNQUFNRiwrREFBVUE7SUFDaEMsTUFBTUcsWUFBWUQsU0FBU0UsTUFBTUQ7SUFDakMsSUFBSSxDQUFDQSxXQUFXLE9BQU8sSUFBSUUsU0FBU0MsS0FBS0MsU0FBUyxDQUFDO1FBQUUyQixJQUFJO1FBQU1DLFlBQVk7SUFBSyxJQUFJO1FBQUUxQixRQUFRO0lBQUk7SUFDbEcscUNBQXFDO0lBQ3JDLE1BQU1WLG9EQUFJQSxDQUFDcUMsVUFBVSxDQUFDO1FBQUVqQztJQUFVO0lBQ2xDLE9BQU8sSUFBSUUsU0FBU0MsS0FBS0MsU0FBUyxDQUFDO1FBQUUyQixJQUFJO1FBQU1DLFlBQVk7SUFBSyxJQUFJO1FBQUUxQixRQUFRO0lBQUk7QUFDcEYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS12aWRlb2dlbi1uZXh0Ly4vYXBwL2FwaS90aHJlYWRzL3JvdXRlLnRzPzdhYTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29ubmVjdFRvRGF0YWJhc2UgfSBmcm9tICcuLi8uLi8uLi9saWIvZGInXG5pbXBvcnQgQ2hhdCBmcm9tICcuLi8uLi8uLi9tb2RlbHMvQ2hhdCdcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICcuLi8uLi8uLi9jb25maWcvd2l0aFNlc3Npb24nO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpXG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKCk7XG4gIGNvbnN0IGNvbXBhbnlJZCA9IHNlc3Npb24/LnVzZXI/LmNvbXBhbnlJZDtcbiAgLy8gT25seSByZXR1cm4gdGhyZWFkcyBmb3IgdGhpcyBjb21wYW55XG4gIGlmICghY29tcGFueUlkKSByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgdGhyZWFkczogW10gfSksIHsgc3RhdHVzOiAyMDAgfSk7XG4gIGNvbnN0IHRocmVhZHMgPSBhd2FpdCBDaGF0LmZpbmQoeyBjb21wYW55SWQgfSwgeyB0aHJlYWRJZDogMSwgdGl0bGU6IDEsIHVwZGF0ZWRBdDogMSB9KS5zb3J0KHsgdXBkYXRlZEF0OiAtMSB9KS5saW1pdCg1MClcbiAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IHRocmVhZHMgfSksIHsgc3RhdHVzOiAyMDAgfSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpXG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKCk7XG4gIGNvbnN0IHVzZXIgPSBzZXNzaW9uPy51c2VyO1xuICBjb25zdCBjb21wYW55SWQgPSB1c2VyPy5jb21wYW55SWQ7XG4gIGNvbnN0IGVtYWlsID0gdXNlcj8uZW1haWw7XG4gIGNvbnN0IHVzZXJJZCA9IHVzZXI/Ll9pZDtcbiAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpXG4gIGNvbnN0IHRpdGxlID0gKGJvZHk/LnRpdGxlIHx8ICdOZXcgY2hhdCcpLnRvU3RyaW5nKCkuc2xpY2UoMCwgODApXG4gIGNvbnN0IHRocmVhZElkID0gY3J5cHRvLnJhbmRvbVVVSUQoKVxuICBpZiAoIXVzZXJJZCB8fCAhZW1haWwgfHwgIWNvbXBhbnlJZCkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ1VzZXIgbm90IGF1dGhlbnRpY2F0ZWQnIH0pLCB7IHN0YXR1czogNDAxIH0pXG4gIH1cbiAgLy8gVGhlIG5ldyBjaGF0IGRvY1xuICBjb25zdCBjaGF0ID0gYXdhaXQgQ2hhdC5jcmVhdGUoe1xuICAgIGlkOiB0aHJlYWRJZCwgLy8gb3IgbGVhdmUgdW5kZWZpbmVkIGlmIHlvdSB3YW50IE1vbmdvIHRvIGdlbmVyYXRlXG4gICAgdGl0bGUsXG4gICAgdXNlcjogeyBpZDogdXNlcklkLCBlbWFpbCB9LFxuICAgIGNvbXBhbnlJZCxcbiAgICB0aHJlYWRJZCxcbiAgICBtZXNzYWdlczogW11cbiAgfSlcbiAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IHRocmVhZElkLCBjaGF0OiB7IHRocmVhZElkLCB0aXRsZTogY2hhdC50aXRsZSwgdXBkYXRlZEF0OiBjaGF0LnVwZGF0ZWRBdCB9IH0pLCB7IHN0YXR1czogMjAxIH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBERUxFVEUoKSB7XG4gIGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKClcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oKTtcbiAgY29uc3QgY29tcGFueUlkID0gc2Vzc2lvbj8udXNlcj8uY29tcGFueUlkO1xuICBpZiAoIWNvbXBhbnlJZCkgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IG9rOiB0cnVlLCBkZWxldGVkQWxsOiB0cnVlIH0pLCB7IHN0YXR1czogMjAwIH0pO1xuICAvLyBPbmx5IGRlbGV0ZSB0aGlzIGNvbXBhbnkncyB0aHJlYWRzXG4gIGF3YWl0IENoYXQuZGVsZXRlTWFueSh7IGNvbXBhbnlJZCB9KVxuICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgb2s6IHRydWUsIGRlbGV0ZWRBbGw6IHRydWUgfSksIHsgc3RhdHVzOiAyMDAgfSlcbn1cblxuXG4iXSwibmFtZXMiOlsiY29ubmVjdFRvRGF0YWJhc2UiLCJDaGF0IiwiZ2V0U2Vzc2lvbiIsIkdFVCIsInNlc3Npb24iLCJjb21wYW55SWQiLCJ1c2VyIiwiUmVzcG9uc2UiLCJKU09OIiwic3RyaW5naWZ5IiwidGhyZWFkcyIsInN0YXR1cyIsImZpbmQiLCJ0aHJlYWRJZCIsInRpdGxlIiwidXBkYXRlZEF0Iiwic29ydCIsImxpbWl0IiwiUE9TVCIsInJlcXVlc3QiLCJlbWFpbCIsInVzZXJJZCIsIl9pZCIsImJvZHkiLCJqc29uIiwiY2F0Y2giLCJ0b1N0cmluZyIsInNsaWNlIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsImVycm9yIiwiY2hhdCIsImNyZWF0ZSIsImlkIiwibWVzc2FnZXMiLCJERUxFVEUiLCJvayIsImRlbGV0ZWRBbGwiLCJkZWxldGVNYW55Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/threads/route.ts\n");

/***/ }),

/***/ "(rsc)/./config/ironOption.tsx":
/*!*******************************!*\
  !*** ./config/ironOption.tsx ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst ironOption = {\n    cookieName: \"cookie\",\n    password: \"82f80fc227d5ee18452b985d94a2f538d3fb1209\" || 0,\n    cookieOptions: {\n        httpOnly: true,\n        secure: false\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ironOption);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9jb25maWcvaXJvbk9wdGlvbi50c3giLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE1BQU1BLGFBQWE7SUFDZkMsWUFBWTtJQUNaQyxVQUFVQywwQ0FBdUMsSUFBSTtJQUNyREcsZUFBZTtRQUNYQyxVQUFVO1FBQ1ZDLFFBQVE7SUFDWjtBQUNKO0FBRUEsaUVBQWVSLFVBQVVBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS12aWRlb2dlbi1uZXh0Ly4vY29uZmlnL2lyb25PcHRpb24udHN4PzVjZWUiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaXJvbk9wdGlvbiA9IHtcbiAgICBjb29raWVOYW1lOiAnY29va2llJywgLy8gTXVzdCBtYXRjaCBXRUFNIGlyb24tc2Vzc2lvbiBjb29raWVcbiAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQ09PS0lFX1BBU1NXT1JEIHx8ICdlTmZVbTdtbVUydElyRzdmbDB6VG1zd0g3aWJhcmZMbycsXG4gICAgY29va2llT3B0aW9uczoge1xuICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgc2VjdXJlOiBmYWxzZSxcbiAgICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgaXJvbk9wdGlvbjtcbiJdLCJuYW1lcyI6WyJpcm9uT3B0aW9uIiwiY29va2llTmFtZSIsInBhc3N3b3JkIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0NPT0tJRV9QQVNTV09SRCIsImNvb2tpZU9wdGlvbnMiLCJodHRwT25seSIsInNlY3VyZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./config/ironOption.tsx\n");

/***/ }),

/***/ "(rsc)/./config/withSession.tsx":
/*!********************************!*\
  !*** ./config/withSession.tsx ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSession: () => (/* binding */ getSession)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-server-reference */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var iron_session__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! iron-session */ \"(rsc)/./node_modules/iron-session/dist/index.js\");\n/* harmony import */ var _ironOption__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ironOption */ \"(rsc)/./config/ironOption.tsx\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"2020b16bf01611bf028586161652ae819ed2a2e7\":\"getSession\"} */ \n\n\n\n\nasync function getSession() {\n    const session = await (0,iron_session__WEBPACK_IMPORTED_MODULE_4__.getIronSession)((0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)(), _ironOption__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\n    return session;\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_5__.ensureServerEntryExports)([\n    getSession\n]);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(\"2020b16bf01611bf028586161652ae819ed2a2e7\", getSession);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9jb25maWcvd2l0aFNlc3Npb24udHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFFdUM7QUFDb0I7QUFDckI7QUFHL0IsZUFBZUc7SUFDbEIsTUFBTUMsVUFBVSxNQUFNSCw0REFBY0EsQ0FBQ0QscURBQU9BLElBQUlFLG1EQUFVQTtJQUMxRCxPQUFPRTtBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktdmlkZW9nZW4tbmV4dC8uL2NvbmZpZy93aXRoU2Vzc2lvbi50c3g/YWZkOCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XG5cbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuaW1wb3J0IHsgZ2V0SXJvblNlc3Npb24sIElyb25TZXNzaW9uIH0gZnJvbSAnaXJvbi1zZXNzaW9uJztcbmltcG9ydCBpcm9uT3B0aW9uIGZyb20gJy4vaXJvbk9wdGlvbic7XG5pbXBvcnQgeyBJcm9uU2Vzc2lvbkRhdGEgfSBmcm9tICcuLi90eXBlcy91c2VyJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb24oKTogUHJvbWlzZTxJcm9uU2Vzc2lvbjxJcm9uU2Vzc2lvbkRhdGE+PiB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldElyb25TZXNzaW9uKGNvb2tpZXMoKSwgaXJvbk9wdGlvbik7XG4gICAgcmV0dXJuIHNlc3Npb247XG59OyJdLCJuYW1lcyI6WyJjb29raWVzIiwiZ2V0SXJvblNlc3Npb24iLCJpcm9uT3B0aW9uIiwiZ2V0U2Vzc2lvbiIsInNlc3Npb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./config/withSession.tsx\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nlet isConnected = 0;\nfunction buildMongoUriFromEnv() {\n    const conn = process.env.DB_CONNECTION || \"mongodb+srv\";\n    const host = process.env.DB_HOST;\n    const db = process.env.DB_DATABASE;\n    const user = process.env.DB_USERNAME;\n    const pass = process.env.DB_PASSWORD;\n    const port = process.env.DB_PORT // optional, may be undefined\n    ;\n    if (!(host && db && user && pass)) {\n        throw new Error(\"Missing database env variables for custom MongoDB URI\");\n    }\n    // SRV = no port, non-SRV can have port\n    let uri;\n    if (conn === \"mongodb+srv\") {\n        uri = `${conn}://${user}:${encodeURIComponent(pass)}@${host}/${db}`;\n    } else {\n        const portPart = port ? `:${port}` : \"\";\n        uri = `${conn}://${user}:${encodeURIComponent(pass)}@${host}${portPart}/${db}`;\n    }\n    return uri;\n}\nasync function connectToDatabase() {\n    if (isConnected) return;\n    let uri = process.env.MONGODB_URI;\n    if (!uri) {\n        uri = buildMongoUriFromEnv();\n    }\n    const conn = await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(uri, {\n        dbName: process.env.MONGODB_DATABASE || undefined\n    });\n    isConnected = conn.connections[0].readyState;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStCO0FBRS9CLElBQUlDLGNBQWM7QUFFbEIsU0FBU0M7SUFDUCxNQUFNQyxPQUFPQyxRQUFRQyxHQUFHLENBQUNDLGFBQWEsSUFBSTtJQUMxQyxNQUFNQyxPQUFPSCxRQUFRQyxHQUFHLENBQUNHLE9BQU87SUFDaEMsTUFBTUMsS0FBS0wsUUFBUUMsR0FBRyxDQUFDSyxXQUFXO0lBQ2xDLE1BQU1DLE9BQU9QLFFBQVFDLEdBQUcsQ0FBQ08sV0FBVztJQUNwQyxNQUFNQyxPQUFPVCxRQUFRQyxHQUFHLENBQUNTLFdBQVc7SUFDcEMsTUFBTUMsT0FBT1gsUUFBUUMsR0FBRyxDQUFDVyxPQUFPLENBQUMsNkJBQTZCOztJQUU5RCxJQUFJLENBQUVULENBQUFBLFFBQVFFLE1BQU1FLFFBQVFFLElBQUcsR0FBSTtRQUNqQyxNQUFNLElBQUlJLE1BQU07SUFDbEI7SUFFQSx1Q0FBdUM7SUFDdkMsSUFBSUM7SUFDSixJQUFJZixTQUFTLGVBQWU7UUFDMUJlLE1BQU0sQ0FBQyxFQUFFZixLQUFLLEdBQUcsRUFBRVEsS0FBSyxDQUFDLEVBQUVRLG1CQUFtQk4sTUFBTSxDQUFDLEVBQUVOLEtBQUssQ0FBQyxFQUFFRSxHQUFHLENBQUM7SUFDckUsT0FBTztRQUNMLE1BQU1XLFdBQVdMLE9BQU8sQ0FBQyxDQUFDLEVBQUVBLEtBQUssQ0FBQyxHQUFHO1FBQ3JDRyxNQUFNLENBQUMsRUFBRWYsS0FBSyxHQUFHLEVBQUVRLEtBQUssQ0FBQyxFQUFFUSxtQkFBbUJOLE1BQU0sQ0FBQyxFQUFFTixLQUFLLEVBQUVhLFNBQVMsQ0FBQyxFQUFFWCxHQUFHLENBQUM7SUFDaEY7SUFDQSxPQUFPUztBQUNUO0FBRU8sZUFBZUc7SUFDcEIsSUFBSXBCLGFBQWE7SUFDakIsSUFBSWlCLE1BQU1kLFFBQVFDLEdBQUcsQ0FBQ2lCLFdBQVc7SUFDakMsSUFBSSxDQUFDSixLQUFLO1FBQ1JBLE1BQU1oQjtJQUNSO0lBQ0EsTUFBTUMsT0FBTyxNQUFNSCx1REFBZ0IsQ0FBQ2tCLEtBQUs7UUFBRU0sUUFBUXBCLFFBQVFDLEdBQUcsQ0FBQ29CLGdCQUFnQixJQUFJQztJQUFVO0lBQzdGekIsY0FBY0UsS0FBS3dCLFdBQVcsQ0FBQyxFQUFFLENBQUNDLFVBQVU7QUFDOUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS12aWRlb2dlbi1uZXh0Ly4vbGliL2RiLnRzPzFkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJ1xuXG5sZXQgaXNDb25uZWN0ZWQgPSAwXG5cbmZ1bmN0aW9uIGJ1aWxkTW9uZ29VcmlGcm9tRW52KCkge1xuICBjb25zdCBjb25uID0gcHJvY2Vzcy5lbnYuREJfQ09OTkVDVElPTiB8fCAnbW9uZ29kYitzcnYnXG4gIGNvbnN0IGhvc3QgPSBwcm9jZXNzLmVudi5EQl9IT1NUXG4gIGNvbnN0IGRiID0gcHJvY2Vzcy5lbnYuREJfREFUQUJBU0VcbiAgY29uc3QgdXNlciA9IHByb2Nlc3MuZW52LkRCX1VTRVJOQU1FXG4gIGNvbnN0IHBhc3MgPSBwcm9jZXNzLmVudi5EQl9QQVNTV09SRFxuICBjb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuREJfUE9SVCAvLyBvcHRpb25hbCwgbWF5IGJlIHVuZGVmaW5lZFxuXG4gIGlmICghKGhvc3QgJiYgZGIgJiYgdXNlciAmJiBwYXNzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBkYXRhYmFzZSBlbnYgdmFyaWFibGVzIGZvciBjdXN0b20gTW9uZ29EQiBVUkknKVxuICB9XG5cbiAgLy8gU1JWID0gbm8gcG9ydCwgbm9uLVNSViBjYW4gaGF2ZSBwb3J0XG4gIGxldCB1cmlcbiAgaWYgKGNvbm4gPT09ICdtb25nb2RiK3NydicpIHtcbiAgICB1cmkgPSBgJHtjb25ufTovLyR7dXNlcn06JHtlbmNvZGVVUklDb21wb25lbnQocGFzcyl9QCR7aG9zdH0vJHtkYn1gXG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcG9ydFBhcnQgPSBwb3J0ID8gYDoke3BvcnR9YCA6ICcnXG4gICAgdXJpID0gYCR7Y29ubn06Ly8ke3VzZXJ9OiR7ZW5jb2RlVVJJQ29tcG9uZW50KHBhc3MpfUAke2hvc3R9JHtwb3J0UGFydH0vJHtkYn1gXG4gIH1cbiAgcmV0dXJuIHVyaVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvRGF0YWJhc2UoKSB7XG4gIGlmIChpc0Nvbm5lY3RlZCkgcmV0dXJuXG4gIGxldCB1cmkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSVxuICBpZiAoIXVyaSkge1xuICAgIHVyaSA9IGJ1aWxkTW9uZ29VcmlGcm9tRW52KClcbiAgfVxuICBjb25zdCBjb25uID0gYXdhaXQgbW9uZ29vc2UuY29ubmVjdCh1cmksIHsgZGJOYW1lOiBwcm9jZXNzLmVudi5NT05HT0RCX0RBVEFCQVNFIHx8IHVuZGVmaW5lZCB9KVxuICBpc0Nvbm5lY3RlZCA9IGNvbm4uY29ubmVjdGlvbnNbMF0ucmVhZHlTdGF0ZVxufVxuXG5cbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsImlzQ29ubmVjdGVkIiwiYnVpbGRNb25nb1VyaUZyb21FbnYiLCJjb25uIiwicHJvY2VzcyIsImVudiIsIkRCX0NPTk5FQ1RJT04iLCJob3N0IiwiREJfSE9TVCIsImRiIiwiREJfREFUQUJBU0UiLCJ1c2VyIiwiREJfVVNFUk5BTUUiLCJwYXNzIiwiREJfUEFTU1dPUkQiLCJwb3J0IiwiREJfUE9SVCIsIkVycm9yIiwidXJpIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicG9ydFBhcnQiLCJjb25uZWN0VG9EYXRhYmFzZSIsIk1PTkdPREJfVVJJIiwiY29ubmVjdCIsImRiTmFtZSIsIk1PTkdPREJfREFUQUJBU0UiLCJ1bmRlZmluZWQiLCJjb25uZWN0aW9ucyIsInJlYWR5U3RhdGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./models/Chat.ts":
/*!************************!*\
  !*** ./models/Chat.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MessageSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    id: {\n        type: String,\n        required: true\n    },\n    role: {\n        type: String,\n        enum: [\n            \"user\",\n            \"assistant\"\n        ],\n        required: true\n    },\n    content: {\n        type: String,\n        required: true\n    },\n    videoUrl: {\n        type: String\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    }\n});\nconst ChatSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    id: {\n        type: String\n    },\n    title: {\n        type: String,\n        required: true\n    },\n    user: {\n        id: {\n            type: String,\n            required: true\n        },\n        email: {\n            type: String,\n            required: true\n        }\n    },\n    companyId: {\n        type: String,\n        required: true\n    },\n    threadId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    messages: {\n        type: [\n            MessageSchema\n        ],\n        default: []\n    }\n}, {\n    timestamps: {\n        createdAt: true,\n        updatedAt: true\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mongoose__WEBPACK_IMPORTED_MODULE_0__.models.Chat || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"Chat\", ChatSchema, \"solution_aivideo_chat\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvQ2hhdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMEQ7QUFFMUQsTUFBTUcsZ0JBQWdCLElBQUlILDRDQUFNQSxDQUFDO0lBQy9CSSxJQUFJO1FBQUVDLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUNuQ0MsTUFBTTtRQUFFSCxNQUFNQztRQUFRRyxNQUFNO1lBQUM7WUFBUTtTQUFZO1FBQUVGLFVBQVU7SUFBSztJQUNsRUcsU0FBUztRQUFFTCxNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDeENJLFVBQVU7UUFBRU4sTUFBTUM7SUFBTztJQUN6Qk0sV0FBVztRQUFFUCxNQUFNUTtRQUFNQyxTQUFTRCxLQUFLRSxHQUFHO0lBQUM7QUFDN0M7QUFFQSxNQUFNQyxhQUFhLElBQUloQiw0Q0FBTUEsQ0FBQztJQUM1QkksSUFBSTtRQUFFQyxNQUFNQztJQUFPO0lBQ25CVyxPQUFPO1FBQUVaLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUN0Q1csTUFBTTtRQUNKZCxJQUFJO1lBQUVDLE1BQU1DO1lBQVFDLFVBQVU7UUFBSztRQUNuQ1ksT0FBTztZQUFFZCxNQUFNQztZQUFRQyxVQUFVO1FBQUs7SUFDeEM7SUFDQWEsV0FBVztRQUFFZixNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDMUNjLFVBQVU7UUFBRWhCLE1BQU1DO1FBQVFDLFVBQVU7UUFBTWUsUUFBUTtJQUFLO0lBQ3ZEQyxVQUFVO1FBQUVsQixNQUFNO1lBQUNGO1NBQWM7UUFBRVcsU0FBUyxFQUFFO0lBQUM7QUFFakQsR0FBRztJQUFFVSxZQUFZO1FBQUVaLFdBQVc7UUFBTWEsV0FBVztJQUFLO0FBQUU7QUFLdEQsaUVBQWV4Qiw0Q0FBTUEsQ0FBQ3lCLElBQUksSUFBSXhCLCtDQUFLQSxDQUFDLFFBQVFjLFlBQVksMEJBQXdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktdmlkZW9nZW4tbmV4dC8uL21vZGVscy9DaGF0LnRzP2RmMWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSwgbW9kZWxzLCBtb2RlbCB9IGZyb20gJ21vbmdvb3NlJ1xuXG5jb25zdCBNZXNzYWdlU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIGlkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgcm9sZTogeyB0eXBlOiBTdHJpbmcsIGVudW06IFsndXNlcicsICdhc3Npc3RhbnQnXSwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgY29udGVudDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHZpZGVvVXJsOiB7IHR5cGU6IFN0cmluZyB9LFxuICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcbn0pXG5cbmNvbnN0IENoYXRTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgaWQ6IHsgdHlwZTogU3RyaW5nIH0sIC8vIE9wdGlvbmFsLCB3aWxsIG1pcnJvciBfaWQgb3IgY2FuIGJlIGxlZnQgZm9yIGFwcCB0byBmaWxsXG4gIHRpdGxlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgdXNlcjoge1xuICAgIGlkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBlbWFpbDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIH0sXG4gIGNvbXBhbnlJZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHRocmVhZElkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIHVuaXF1ZTogdHJ1ZSB9LFxuICBtZXNzYWdlczogeyB0eXBlOiBbTWVzc2FnZVNjaGVtYV0sIGRlZmF1bHQ6IFtdIH0sXG4gIC8vIEFueSBvdGhlciBmaWVsZHMuLi5cbn0sIHsgdGltZXN0YW1wczogeyBjcmVhdGVkQXQ6IHRydWUsIHVwZGF0ZWRBdDogdHJ1ZSB9IH0pXG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VEb2MgPSBtb25nb29zZS5JbmZlclNjaGVtYVR5cGU8dHlwZW9mIE1lc3NhZ2VTY2hlbWE+XG5leHBvcnQgdHlwZSBDaGF0RG9jID0gbW9uZ29vc2UuSW5mZXJTY2hlbWFUeXBlPHR5cGVvZiBDaGF0U2NoZW1hPlxuXG5leHBvcnQgZGVmYXVsdCBtb2RlbHMuQ2hhdCB8fCBtb2RlbCgnQ2hhdCcsIENoYXRTY2hlbWEsICdzb2x1dGlvbl9haXZpZGVvX2NoYXQnKVxuXG5cbiJdLCJuYW1lcyI6WyJTY2hlbWEiLCJtb2RlbHMiLCJtb2RlbCIsIk1lc3NhZ2VTY2hlbWEiLCJpZCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInJvbGUiLCJlbnVtIiwiY29udGVudCIsInZpZGVvVXJsIiwiY3JlYXRlZEF0IiwiRGF0ZSIsImRlZmF1bHQiLCJub3ciLCJDaGF0U2NoZW1hIiwidGl0bGUiLCJ1c2VyIiwiZW1haWwiLCJjb21wYW55SWQiLCJ0aHJlYWRJZCIsInVuaXF1ZSIsIm1lc3NhZ2VzIiwidGltZXN0YW1wcyIsInVwZGF0ZWRBdCIsIkNoYXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./models/Chat.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/uncrypto","vendor-chunks/iron-webcrypto","vendor-chunks/iron-session","vendor-chunks/cookie"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fthreads%2Froute&page=%2Fapi%2Fthreads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fthreads%2Froute.ts&appDir=%2FUsers%2Fkshitijvarma%2FDesktop%2Fvideo-editor%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkshitijvarma%2FDesktop%2Fvideo-editor&isDev=true&tsconfigPath=tsconfig.json&basePath=%2Faivideo&assetPrefix=%2Faivideo&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();